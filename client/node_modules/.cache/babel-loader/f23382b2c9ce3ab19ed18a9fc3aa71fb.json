{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['exports', 'react', 'react-dom', 'react-async-script-loader', 'prop-types'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(exports, require('react'), require('react-dom'), require('react-async-script-loader'), require('prop-types'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, global.react, global.reactDom, global.reactAsyncScriptLoader, global.propTypes);\n    global.index = mod.exports;\n  }\n})(this, function (exports, _react, _reactDom, _reactAsyncScriptLoader, _propTypes) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _react2 = _interopRequireDefault(_react);\n\n  var _reactDom2 = _interopRequireDefault(_reactDom);\n\n  var _reactAsyncScriptLoader2 = _interopRequireDefault(_reactAsyncScriptLoader);\n\n  var _propTypes2 = _interopRequireDefault(_propTypes);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  var PaypalButton = function (_React$Component) {\n    _inherits(PaypalButton, _React$Component);\n\n    function PaypalButton(props) {\n      _classCallCheck(this, PaypalButton);\n\n      var _this = _possibleConstructorReturn(this, (PaypalButton.__proto__ || Object.getPrototypeOf(PaypalButton)).call(this, props));\n\n      window.React = _react2.default;\n      window.ReactDOM = _reactDom2.default;\n      _this.state = {\n        showButton: false\n      };\n      return _this;\n    }\n\n    _createClass(PaypalButton, [{\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(_ref) {\n        var isScriptLoaded = _ref.isScriptLoaded,\n            isScriptLoadSucceed = _ref.isScriptLoadSucceed;\n\n        if (!this.state.show) {\n          if (isScriptLoaded && !this.props.isScriptLoaded) {\n            if (isScriptLoadSucceed) {\n              this.setState({\n                showButton: true\n              });\n            } else {\n              console.log('Cannot load Paypal script!');\n              this.props.onError();\n            }\n          }\n        }\n      }\n    }, {\n      key: 'componentDidMount',\n      value: function componentDidMount() {\n        var _props = this.props,\n            isScriptLoaded = _props.isScriptLoaded,\n            isScriptLoadSucceed = _props.isScriptLoadSucceed;\n\n        if (isScriptLoaded && isScriptLoadSucceed) {\n          this.setState({\n            showButton: true\n          });\n        }\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _this2 = this;\n\n        var payment = function payment() {\n          return paypal.rest.payment.create(_this2.props.env, _this2.props.client, {\n            transactions: [{\n              amount: {\n                total: _this2.props.total,\n                currency: _this2.props.currency\n              }\n            }]\n          }, {\n            input_fields: {\n              // any values other than null, and the address is not returned after payment execution.\n              no_shipping: _this2.props.shipping\n            }\n          });\n        };\n\n        var onAuthorize = function onAuthorize(data, actions) {\n          return actions.payment.execute().then(function (payment_data) {\n            // console.log(`payment_data: ${JSON.stringify(payment_data, null, 1)}`)\n            var payment = Object.assign({}, _this2.props.payment);\n            payment.paid = true;\n            payment.cancelled = false;\n            payment.payerID = data.payerID;\n            payment.paymentID = data.paymentID;\n            payment.paymentToken = data.paymentToken;\n            payment.returnUrl = data.returnUrl; // getting buyer's shipping address and email\n\n            payment.address = payment_data.payer.payer_info.shipping_address;\n            payment.email = payment_data.payer.payer_info.email;\n\n            _this2.props.onSuccess(payment);\n          });\n        };\n\n        var ppbtn = '';\n\n        if (this.state.showButton) {\n          ppbtn = _react2.default.createElement(paypal.Button.react, {\n            env: this.props.env,\n            client: this.props.client,\n            style: this.props.style,\n            payment: payment,\n            commit: true,\n            onAuthorize: onAuthorize,\n            onCancel: this.props.onCancel // \"Error: Unrecognized prop: shipping\" was caused by the next line\n            // shipping={this.props.shipping}\n\n          });\n        }\n\n        return _react2.default.createElement('div', null, ppbtn);\n      }\n    }]);\n\n    return PaypalButton;\n  }(_react2.default.Component);\n\n  PaypalButton.propTypes = {\n    currency: _propTypes2.default.string.isRequired,\n    total: _propTypes2.default.number.isRequired,\n    client: _propTypes2.default.object.isRequired,\n    style: _propTypes2.default.object\n  };\n  PaypalButton.defaultProps = {\n    env: 'sandbox',\n    // null means buyer address is returned in the payment execution response\n    shipping: null,\n    onSuccess: function onSuccess(payment) {\n      console.log('The payment was succeeded!', payment);\n    },\n    onCancel: function onCancel(data) {\n      console.log('The payment was cancelled!', data);\n    },\n    onError: function onError(err) {\n      console.log('Error loading Paypal script!', err);\n    }\n  };\n  exports.default = (0, _reactAsyncScriptLoader2.default)('https://www.paypalobjects.com/api/checkout.js')(PaypalButton);\n});","map":{"version":3,"sources":["/Users/stephanielau/Projects/waves/client/node_modules/react-paypal-express-checkout/dist/index.js"],"names":["global","factory","define","amd","exports","require","mod","react","reactDom","reactAsyncScriptLoader","propTypes","index","_react","_reactDom","_reactAsyncScriptLoader","_propTypes","Object","defineProperty","value","_react2","_interopRequireDefault","_reactDom2","_reactAsyncScriptLoader2","_propTypes2","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","PaypalButton","_React$Component","_this","getPrototypeOf","window","React","ReactDOM","state","showButton","componentWillReceiveProps","_ref","isScriptLoaded","isScriptLoadSucceed","show","setState","console","log","onError","componentDidMount","_props","render","_this2","payment","paypal","rest","env","client","transactions","amount","total","currency","input_fields","no_shipping","shipping","onAuthorize","data","actions","execute","then","payment_data","assign","paid","cancelled","payerID","paymentID","paymentToken","returnUrl","address","payer","payer_info","shipping_address","email","onSuccess","ppbtn","createElement","Button","style","commit","onCancel","Component","string","isRequired","number","object","defaultProps","err"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['exports', 'react', 'react-dom', 'react-async-script-loader', 'prop-types'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(exports, require('react'), require('react-dom'), require('react-async-script-loader'), require('prop-types'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(mod.exports, global.react, global.reactDom, global.reactAsyncScriptLoader, global.propTypes);\n        global.index = mod.exports;\n    }\n})(this, function (exports, _react, _reactDom, _reactAsyncScriptLoader, _propTypes) {\n    'use strict';\n\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n\n    var _react2 = _interopRequireDefault(_react);\n\n    var _reactDom2 = _interopRequireDefault(_reactDom);\n\n    var _reactAsyncScriptLoader2 = _interopRequireDefault(_reactAsyncScriptLoader);\n\n    var _propTypes2 = _interopRequireDefault(_propTypes);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n        }\n    }\n\n    var _createClass = function () {\n        function defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n                var descriptor = props[i];\n                descriptor.enumerable = descriptor.enumerable || false;\n                descriptor.configurable = true;\n                if (\"value\" in descriptor) descriptor.writable = true;\n                Object.defineProperty(target, descriptor.key, descriptor);\n            }\n        }\n\n        return function (Constructor, protoProps, staticProps) {\n            if (protoProps) defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) defineProperties(Constructor, staticProps);\n            return Constructor;\n        };\n    }();\n\n    function _possibleConstructorReturn(self, call) {\n        if (!self) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                enumerable: false,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n\n    var PaypalButton = function (_React$Component) {\n        _inherits(PaypalButton, _React$Component);\n\n        function PaypalButton(props) {\n            _classCallCheck(this, PaypalButton);\n\n            var _this = _possibleConstructorReturn(this, (PaypalButton.__proto__ || Object.getPrototypeOf(PaypalButton)).call(this, props));\n\n            window.React = _react2.default;\n            window.ReactDOM = _reactDom2.default;\n            _this.state = {\n                showButton: false\n            };\n            return _this;\n        }\n\n        _createClass(PaypalButton, [{\n            key: 'componentWillReceiveProps',\n            value: function componentWillReceiveProps(_ref) {\n                var isScriptLoaded = _ref.isScriptLoaded,\n                    isScriptLoadSucceed = _ref.isScriptLoadSucceed;\n\n                if (!this.state.show) {\n                    if (isScriptLoaded && !this.props.isScriptLoaded) {\n                        if (isScriptLoadSucceed) {\n                            this.setState({ showButton: true });\n                        } else {\n                            console.log('Cannot load Paypal script!');\n                            this.props.onError();\n                        }\n                    }\n                }\n            }\n        }, {\n            key: 'componentDidMount',\n            value: function componentDidMount() {\n                var _props = this.props,\n                    isScriptLoaded = _props.isScriptLoaded,\n                    isScriptLoadSucceed = _props.isScriptLoadSucceed;\n\n                if (isScriptLoaded && isScriptLoadSucceed) {\n                    this.setState({ showButton: true });\n                }\n            }\n        }, {\n            key: 'render',\n            value: function render() {\n                var _this2 = this;\n\n                var payment = function payment() {\n                    return paypal.rest.payment.create(_this2.props.env, _this2.props.client, {\n                        transactions: [{ amount: { total: _this2.props.total, currency: _this2.props.currency } }]\n                    }, {\n                        input_fields: {\n                            // any values other than null, and the address is not returned after payment execution.\n                            no_shipping: _this2.props.shipping\n                        }\n                    });\n                };\n\n                var onAuthorize = function onAuthorize(data, actions) {\n                    return actions.payment.execute().then(function (payment_data) {\n                        // console.log(`payment_data: ${JSON.stringify(payment_data, null, 1)}`)\n                        var payment = Object.assign({}, _this2.props.payment);\n                        payment.paid = true;\n                        payment.cancelled = false;\n                        payment.payerID = data.payerID;\n                        payment.paymentID = data.paymentID;\n                        payment.paymentToken = data.paymentToken;\n                        payment.returnUrl = data.returnUrl;\n                        // getting buyer's shipping address and email\n                        payment.address = payment_data.payer.payer_info.shipping_address;\n                        payment.email = payment_data.payer.payer_info.email;\n                        _this2.props.onSuccess(payment);\n                    });\n                };\n\n                var ppbtn = '';\n                if (this.state.showButton) {\n                    ppbtn = _react2.default.createElement(paypal.Button.react, {\n                        env: this.props.env,\n                        client: this.props.client,\n                        style: this.props.style,\n                        payment: payment,\n                        commit: true,\n                        onAuthorize: onAuthorize,\n                        onCancel: this.props.onCancel\n\n                        // \"Error: Unrecognized prop: shipping\" was caused by the next line\n                        // shipping={this.props.shipping}\n                    });\n                }\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    ppbtn\n                );\n            }\n        }]);\n\n        return PaypalButton;\n    }(_react2.default.Component);\n\n    PaypalButton.propTypes = {\n        currency: _propTypes2.default.string.isRequired,\n        total: _propTypes2.default.number.isRequired,\n        client: _propTypes2.default.object.isRequired,\n        style: _propTypes2.default.object\n    };\n\n    PaypalButton.defaultProps = {\n        env: 'sandbox',\n        // null means buyer address is returned in the payment execution response\n        shipping: null,\n        onSuccess: function onSuccess(payment) {\n            console.log('The payment was succeeded!', payment);\n        },\n        onCancel: function onCancel(data) {\n            console.log('The payment was cancelled!', data);\n        },\n        onError: function onError(err) {\n            console.log('Error loading Paypal script!', err);\n        }\n    };\n\n    exports.default = (0, _reactAsyncScriptLoader2.default)('https://www.paypalobjects.com/api/checkout.js')(PaypalButton);\n});"]},"metadata":{},"sourceType":"script"}