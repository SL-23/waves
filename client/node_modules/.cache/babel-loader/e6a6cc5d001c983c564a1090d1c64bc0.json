{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar isDefined = exports.isDefined = function isDefined(val) {\n  return val != null;\n};\n\nvar isFunction = exports.isFunction = function isFunction(val) {\n  return typeof val === 'function';\n};\n\nvar noop = exports.noop = function noop(_) {};\n\nvar newScript = exports.newScript = function newScript(src) {\n  return function (cb) {\n    var script = document.createElement('script');\n    script.src = src;\n    script.addEventListener('load', function () {\n      return cb(null, src);\n    });\n    script.addEventListener('error', function () {\n      return cb(true, src);\n    });\n    document.body.appendChild(script);\n    return script;\n  };\n};\n\nvar keyIterator = function keyIterator(cols) {\n  var keys = Object.keys(cols);\n  var i = -1;\n  return {\n    next: function next() {\n      i++; // inc\n\n      if (i >= keys.length) return null;else return keys[i];\n    }\n  };\n}; // tasks should be a collection of thunk\n\n\nvar parallel = exports.parallel = function parallel() {\n  for (var _len = arguments.length, tasks = Array(_len), _key = 0; _key < _len; _key++) {\n    tasks[_key] = arguments[_key];\n  }\n\n  return function (each) {\n    return function (cb) {\n      var hasError = false;\n      var successed = 0;\n      var ret = [];\n      tasks = tasks.filter(isFunction);\n      if (tasks.length <= 0) cb(null);else {\n        tasks.forEach(function (task, i) {\n          var thunk = task;\n          thunk(function (err) {\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            if (err) hasError = true;else {\n              // collect result\n              if (args.length <= 1) args = args[0];\n              ret[i] = args;\n              successed++;\n            }\n            if (isFunction(each)) each.call(null, err, args, i);\n            if (hasError) cb(true);else if (tasks.length === successed) {\n              cb(null, ret);\n            }\n          });\n        });\n      }\n    };\n  };\n}; // tasks should be a collection of thunk\n\n\nvar series = exports.series = function series() {\n  for (var _len3 = arguments.length, tasks = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    tasks[_key3] = arguments[_key3];\n  }\n\n  return function (each) {\n    return function (cb) {\n      tasks = tasks.filter(function (val) {\n        return val != null;\n      });\n      var nextKey = keyIterator(tasks);\n\n      var nextThunk = function nextThunk() {\n        var key = nextKey.next();\n        var thunk = tasks[key];\n        if (Array.isArray(thunk)) thunk = parallel.apply(null, thunk).call(null, each);\n        return [+key, thunk]; // convert `key` to number\n      };\n\n      var key = void 0,\n          thunk = void 0;\n      var next = nextThunk();\n      key = next[0];\n      thunk = next[1];\n      if (thunk == null) return cb(null);\n      var ret = [];\n\n      var iterator = function iterator() {\n        thunk(function (err) {\n          for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n            args[_key4 - 1] = arguments[_key4];\n          }\n\n          if (args.length <= 1) args = args[0];\n          if (isFunction(each)) each.call(null, err, args, key);\n          if (err) cb(err);else {\n            // collect result\n            ret.push(args);\n            next = nextThunk();\n            key = next[0];\n            thunk = next[1];\n            if (thunk == null) return cb(null, ret); // finished\n            else iterator();\n          }\n        });\n      };\n\n      iterator();\n    };\n  };\n};","map":{"version":3,"sources":["/Users/stephanielau/Projects/waves/client/node_modules/react-async-script-loader/lib/utils.js"],"names":["Object","defineProperty","exports","value","isDefined","val","isFunction","noop","_","newScript","src","cb","script","document","createElement","addEventListener","body","appendChild","keyIterator","cols","keys","i","next","length","parallel","_len","arguments","tasks","Array","_key","each","hasError","successed","ret","filter","forEach","task","thunk","err","_len2","args","_key2","call","series","_len3","_key3","nextKey","nextThunk","key","isArray","apply","iterator","_len4","_key4","push"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar isDefined = exports.isDefined = function isDefined(val) {\n  return val != null;\n};\nvar isFunction = exports.isFunction = function isFunction(val) {\n  return typeof val === 'function';\n};\nvar noop = exports.noop = function noop(_) {};\n\nvar newScript = exports.newScript = function newScript(src) {\n  return function (cb) {\n    var script = document.createElement('script');\n    script.src = src;\n    script.addEventListener('load', function () {\n      return cb(null, src);\n    });\n    script.addEventListener('error', function () {\n      return cb(true, src);\n    });\n    document.body.appendChild(script);\n    return script;\n  };\n};\n\nvar keyIterator = function keyIterator(cols) {\n  var keys = Object.keys(cols);\n  var i = -1;\n  return {\n    next: function next() {\n      i++; // inc\n      if (i >= keys.length) return null;else return keys[i];\n    }\n  };\n};\n\n// tasks should be a collection of thunk\nvar parallel = exports.parallel = function parallel() {\n  for (var _len = arguments.length, tasks = Array(_len), _key = 0; _key < _len; _key++) {\n    tasks[_key] = arguments[_key];\n  }\n\n  return function (each) {\n    return function (cb) {\n      var hasError = false;\n      var successed = 0;\n      var ret = [];\n      tasks = tasks.filter(isFunction);\n\n      if (tasks.length <= 0) cb(null);else {\n        tasks.forEach(function (task, i) {\n          var thunk = task;\n          thunk(function (err) {\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            if (err) hasError = true;else {\n              // collect result\n              if (args.length <= 1) args = args[0];\n\n              ret[i] = args;\n              successed++;\n            }\n\n            if (isFunction(each)) each.call(null, err, args, i);\n\n            if (hasError) cb(true);else if (tasks.length === successed) {\n              cb(null, ret);\n            }\n          });\n        });\n      }\n    };\n  };\n};\n\n// tasks should be a collection of thunk\nvar series = exports.series = function series() {\n  for (var _len3 = arguments.length, tasks = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    tasks[_key3] = arguments[_key3];\n  }\n\n  return function (each) {\n    return function (cb) {\n      tasks = tasks.filter(function (val) {\n        return val != null;\n      });\n      var nextKey = keyIterator(tasks);\n      var nextThunk = function nextThunk() {\n        var key = nextKey.next();\n        var thunk = tasks[key];\n        if (Array.isArray(thunk)) thunk = parallel.apply(null, thunk).call(null, each);\n        return [+key, thunk]; // convert `key` to number\n      };\n      var key = void 0,\n          thunk = void 0;\n      var next = nextThunk();\n      key = next[0];\n      thunk = next[1];\n      if (thunk == null) return cb(null);\n\n      var ret = [];\n      var iterator = function iterator() {\n        thunk(function (err) {\n          for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n            args[_key4 - 1] = arguments[_key4];\n          }\n\n          if (args.length <= 1) args = args[0];\n          if (isFunction(each)) each.call(null, err, args, key);\n\n          if (err) cb(err);else {\n            // collect result\n            ret.push(args);\n\n            next = nextThunk();\n            key = next[0];\n            thunk = next[1];\n            if (thunk == null) return cb(null, ret); // finished\n            else iterator();\n          }\n        });\n      };\n      iterator();\n    };\n  };\n};"]},"metadata":{},"sourceType":"script"}